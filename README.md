# 平衡小车
![](/img/3.jpg)
## Feature
* 快速响应外部干扰自平衡
* 遥控移动

## 组成
* 双层车架
* JGA25-370减速电机，减速比34：1，带光电编码器
* 六轴姿态传感器BMI270
* PS2遥控器与接收器
* 电机驱动
* RT1064核心板与主板

## 实现细节
* 卡尔曼滤波，对小车角度进行滤波，至关重要。因为加速度传感器得到的角度有1度误差，这个噪声足以造成小车在平衡位置的剧烈抖动。
* PID角度环 （kp小了肌无力，会大幅度低频摆荡。大了高频振荡，尽可能选在振荡边界，然后加一点kd。在调速度环的时候一起调kd压振荡）
* PID速度环，kp越大刹车性能越好，但是振荡也会越大。注意是正反馈，kp为负，才会给小车一个正确的加速度（对应的倾角）。注意小车的速度也会包含噪声（来自加速度计），而这一噪声也会让小车平衡时抖起来。然后加入kd减小速度的抖动（让加速度不那么大）
* PID转向环
* 遥控器输入滤波

## 效果展示
(小车不倒)



https://github.com/yxysjtu/balance-car/assets/53338300/aa7eaeba-0b58-460f-a057-350560763f8f

(小车巡线)

https://github.com/yxysjtu/balance-car/assets/53338300/5409dca4-b936-4faa-8d91-5078e0ee0611


